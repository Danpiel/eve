<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: Eve::Trust</title>

	<link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

	<script src="../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../lib/eve/trust_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/eve/trust.rb">lib/eve/trust.rb</a></li>
					
						<li><a href="../lib/eve/trust/igb_interface_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/eve/trust/igb_interface.rb">lib/eve/trust/igb_interface.rb</a></li>
					
						<li><a href="../lib/eve/trust/controller_helpers_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/eve/trust/controller_helpers.rb">lib/eve/trust/controller_helpers.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			
			<div id="namespace-list-section" class="section">
				<h3 class="section-header">Namespace</h3>
				<ul class="link-list">
					
					<li><span class="type">MODULE</span> <a href="Trust/ControllerHelpers.html">Eve::Trust::ControllerHelpers</a></li>
					
					<li><span class="type">CLASS</span> <a href="Trust/IgbInterface.html">Eve::Trust::IgbInterface</a></li>
					
				</ul>
			</div>
			

			<!-- Method Quickref -->
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../Eve.html">Eve</a></li>
				
					<li><a href="../Eve/API.html">Eve::API</a></li>
				
					<li><a href="../Eve/API/Connectivity.html">Eve::API::Connectivity</a></li>
				
					<li><a href="../Eve/API/Request.html">Eve::API::Request</a></li>
				
					<li><a href="../Eve/API/Response.html">Eve::API::Response</a></li>
				
					<li><a href="../Eve/API/Response/Inspection.html">Eve::API::Response::Inspection</a></li>
				
					<li><a href="../Eve/API/Response/Rowset.html">Eve::API::Response::Rowset</a></li>
				
					<li><a href="../Eve/API/Response/Rowset/object;.html">Eve::API::Response::Rowset::object;</a></li>
				
					<li><a href="../Eve/API/Response/Rowsets.html">Eve::API::Response::Rowsets</a></li>
				
					<li><a href="../Eve/API/Response/WrapObject.html">Eve::API::Response::WrapObject</a></li>
				
					<li><a href="../Eve/API/Services.html">Eve::API::Services</a></li>
				
					<li><a href="../Eve/API/Services/Account.html">Eve::API::Services::Account</a></li>
				
					<li><a href="../Eve/API/Services/Character.html">Eve::API::Services::Character</a></li>
				
					<li><a href="../Eve/API/Services/Corporation.html">Eve::API::Services::Corporation</a></li>
				
					<li><a href="../Eve/API/Services/Eve.html">Eve::API::Services::Eve</a></li>
				
					<li><a href="../Eve/API/Services/Map.html">Eve::API::Services::Map</a></li>
				
					<li><a href="../Eve/API/Services/Misc.html">Eve::API::Services::Misc</a></li>
				
					<li><a href="../Eve/API/Services/Server.html">Eve::API::Services::Server</a></li>
				
					<li><a href="../Eve/Errors.html">Eve::Errors</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationError.html">Eve::Errors::AuthenticationError</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors.html">Eve::Errors::AuthenticationErrors</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors/AuthenticationFailure.html">Eve::Errors::AuthenticationErrors::AuthenticationFailure</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors/CachedKeyAuthFailure.html">Eve::Errors::AuthenticationErrors::CachedKeyAuthFailure</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors/InadequateSecurityLevel.html">Eve::Errors::AuthenticationErrors::InadequateSecurityLevel</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors/LastAuthenticationFailure.html">Eve::Errors::AuthenticationErrors::LastAuthenticationFailure</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors/LoginDenied.html">Eve::Errors::AuthenticationErrors::LoginDenied</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors/MissingRoles.html">Eve::Errors::AuthenticationErrors::MissingRoles</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors/NotAvailable.html">Eve::Errors::AuthenticationErrors::NotAvailable</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors/NotInAlliance.html">Eve::Errors::AuthenticationErrors::NotInAlliance</a></li>
				
					<li><a href="../Eve/Errors/AuthenticationErrors/WrongAccount.html">Eve::Errors::AuthenticationErrors::WrongAccount</a></li>
				
					<li><a href="../Eve/Errors/InternalError.html">Eve::Errors::InternalError</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors.html">Eve::Errors::InternalErrors</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/CSVMismatch.html">Eve::Errors::InternalErrors::CSVMismatch</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/CacheUtilMissing.html">Eve::Errors::InternalErrors::CacheUtilMissing</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/CharacterInformationFailure.html">Eve::Errors::InternalErrors::CharacterInformationFailure</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/CorporationInformationFailure.html">Eve::Errors::InternalErrors::CorporationInformationFailure</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/FactionMemberInformationFailure.html">Eve::Errors::InternalErrors::FactionMemberInformationFailure</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidAccountKey.html">Eve::Errors::InternalErrors::InvalidAccountKey</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidAttribute.html">Eve::Errors::InternalErrors::InvalidAttribute</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidBloodline.html">Eve::Errors::InternalErrors::InvalidBloodline</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidCharID.html">Eve::Errors::InternalErrors::InvalidCharID</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidCorpID.html">Eve::Errors::InternalErrors::InvalidCorpID</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidCredentials.html">Eve::Errors::InternalErrors::InvalidCredentials</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidGender.html">Eve::Errors::InternalErrors::InvalidGender</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidInput.html">Eve::Errors::InternalErrors::InvalidInput</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidOrNotLoaded.html">Eve::Errors::InternalErrors::InvalidOrNotLoaded</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidRace.html">Eve::Errors::InternalErrors::InvalidRace</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidRefType.html">Eve::Errors::InternalErrors::InvalidRefType</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/InvalidUserID.html">Eve::Errors::InternalErrors::InvalidUserID</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/MailNotAvailable.html">Eve::Errors::InternalErrors::MailNotAvailable</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/MedalInformationFailure.html">Eve::Errors::InternalErrors::MedalInformationFailure</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/MissingCorporation.html">Eve::Errors::InternalErrors::MissingCorporation</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/NotificationsNotAvailable.html">Eve::Errors::InternalErrors::NotificationsNotAvailable</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/NullAttributeID.html">Eve::Errors::InternalErrors::NullAttributeID</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/RolesQueryFailure.html">Eve::Errors::InternalErrors::RolesQueryFailure</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/StarbaseDetailFailure.html">Eve::Errors::InternalErrors::StarbaseDetailFailure</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/TQTimeFailure.html">Eve::Errors::InternalErrors::TQTimeFailure</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/UnexpectedDatabaseFailure.html">Eve::Errors::InternalErrors::UnexpectedDatabaseFailure</a></li>
				
					<li><a href="../Eve/Errors/InternalErrors/UserInformationFailure.html">Eve::Errors::InternalErrors::UserInformationFailure</a></li>
				
					<li><a href="../Eve/Errors/InvalidRowset.html">Eve::Errors::InvalidRowset</a></li>
				
					<li><a href="../Eve/Errors/MiscellaneousError.html">Eve::Errors::MiscellaneousError</a></li>
				
					<li><a href="../Eve/Errors/MiscellaneousErrors.html">Eve::Errors::MiscellaneousErrors</a></li>
				
					<li><a href="../Eve/Errors/MiscellaneousErrors/BackendDatabaseDisabled.html">Eve::Errors::MiscellaneousErrors::BackendDatabaseDisabled</a></li>
				
					<li><a href="../Eve/Errors/MiscellaneousErrors/BetaInProgress.html">Eve::Errors::MiscellaneousErrors::BetaInProgress</a></li>
				
					<li><a href="../Eve/Errors/MiscellaneousErrors/RateLimited.html">Eve::Errors::MiscellaneousErrors::RateLimited</a></li>
				
					<li><a href="../Eve/Errors/MiscellaneousErrors/SiteDatabaseDisabled.html">Eve::Errors::MiscellaneousErrors::SiteDatabaseDisabled</a></li>
				
					<li><a href="../Eve/Errors/MiscellaneousErrors/TestErrorForced.html">Eve::Errors::MiscellaneousErrors::TestErrorForced</a></li>
				
					<li><a href="../Eve/Errors/UnknownError.html">Eve::Errors::UnknownError</a></li>
				
					<li><a href="../Eve/Errors/UserInputError.html">Eve::Errors::UserInputError</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors.html">Eve::Errors::UserInputErrors</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/AccountKeyOutOfBounds.html">Eve::Errors::UserInputErrors::AccountKeyOutOfBounds</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/AssetsAlreadyDownloaded.html">Eve::Errors::UserInputErrors::AssetsAlreadyDownloaded</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/CharacterNotEnlisted.html">Eve::Errors::UserInputErrors::CharacterNotEnlisted</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/CorporationNotEnlisted.html">Eve::Errors::UserInputErrors::CorporationNotEnlisted</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/IndustryJobsAlreadyDownloaded.html">Eve::Errors::UserInputErrors::IndustryJobsAlreadyDownloaded</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/InvalidAccountKey.html">Eve::Errors::UserInputErrors::InvalidAccountKey</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/InvalidBeforeKillID.html">Eve::Errors::UserInputErrors::InvalidBeforeKillID</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/InvalidBeforeRefID.html">Eve::Errors::UserInputErrors::InvalidBeforeRefID</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/InvalidBeforeTransID.html">Eve::Errors::UserInputErrors::InvalidBeforeTransID</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/InvalidCharacterID.html">Eve::Errors::UserInputErrors::InvalidCharacterID</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/InvalidIDList.html">Eve::Errors::UserInputErrors::InvalidIDList</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/InvalidInteger.html">Eve::Errors::UserInputErrors::InvalidInteger</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/InvalidItemID.html">Eve::Errors::UserInputErrors::InvalidItemID</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/InvalidNameList.html">Eve::Errors::UserInputErrors::InvalidNameList</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/KeyNotFound.html">Eve::Errors::UserInputErrors::KeyNotFound</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/KillsExhausted.html">Eve::Errors::UserInputErrors::KillsExhausted</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/KillsNotLoaded.html">Eve::Errors::UserInputErrors::KillsNotLoaded</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/KillsPreviouslyLoaded.html">Eve::Errors::UserInputErrors::KillsPreviouslyLoaded</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/MarketOrdersAlreadyDownloaded.html">Eve::Errors::UserInputErrors::MarketOrdersAlreadyDownloaded</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/MissingUserID.html">Eve::Errors::UserInputErrors::MissingUserID</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/RetryLater.html">Eve::Errors::UserInputErrors::RetryLater</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/VersionEscalationNotAllowed.html">Eve::Errors::UserInputErrors::VersionEscalationNotAllowed</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/VersionMismatch.html">Eve::Errors::UserInputErrors::VersionMismatch</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/WalletExhausted.html">Eve::Errors::UserInputErrors::WalletExhausted</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/WalletNotLoaded.html">Eve::Errors::UserInputErrors::WalletNotLoaded</a></li>
				
					<li><a href="../Eve/Errors/UserInputErrors/WalletPreviouslyLoaded.html">Eve::Errors::UserInputErrors::WalletPreviouslyLoaded</a></li>
				
					<li><a href="../Eve/Helpers.html">Eve::Helpers</a></li>
				
					<li><a href="../Eve/Helpers/JavascriptHelper.html">Eve::Helpers::JavascriptHelper</a></li>
				
					<li><a href="../Eve/Helpers/ViewHelper.html">Eve::Helpers::ViewHelper</a></li>
				
					<li><a href="../Eve/Railtie.html">Eve::Railtie</a></li>
				
					<li><a href="../Eve/Trust.html">Eve::Trust</a></li>
				
					<li><a href="../Eve/Trust/ControllerHelpers.html">Eve::Trust::ControllerHelpers</a></li>
				
					<li><a href="../Eve/Trust/IgbInterface.html">Eve::Trust::IgbInterface</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">Eve::Trust</h1>

		<div id="description">
			<h2><a href="Trust.html">Trust</a></h2>
<p>
The primary purpose for the ActionController is to figure out which View
should be rendered, and what data to send to that View. In keeping with
this paradigm, a few helper methods have been added that allow you to
establish trust with the In-Game Browser (IGB), which in turn provides
access to more useful information such as the player&#8217;s current
location. To establish trust with a compatible browser, simply add one line
to your controller:
</p>
<pre>
 class AnyController &lt; ApplicationController
   requires_trust
 end
</pre>
<p>
This will cause the in-game browser to prompt the user, asking him/her to
complete the handshake. If they refuse, the page will not load. To
establish <em>optional</em> trust &#8212; that is, to allow the page to
load even if the user hasn&#8217;t granted the trust request &#8212; you
can use <tt>prefers_trust</tt> instead:
</p>
<pre>
 class AnyController &lt; ApplicationController
   prefers_trust
 end
</pre>
<p>
Both methods also accept a custom trust request message that will be shown
to the user when they are prompted:
</p>
<pre>
 class AnyController &lt; ApplicationController
   prefers_trust &quot;To take full advantage of the features on this site, please grant this trust request.&quot;
 end
</pre>
<h2>IGB Headers</h2>
<p>
After trust has been established, the IGB sends additional content headers
to the server with every request. These headers contain the most up-to-date
information regarding the current user, his/her location, his/her character
ID, and so on. The character ID could, for example, be used in conjunction
with <a href="API.html">Eve::API</a> to show the character&#8217;s portrait
in a forum.
</p>
<p>
To gain access to this extra information, use the <tt>igb</tt> method:
</p>
<pre>
 class AnyController &lt; ApplicationController
   . . .
   def index
     if igb? &amp;&amp; igb.trusted?                  # if the client is using the IGB and trust has been established
       @solar_system = igb.solar_system_name  # then make a note of the current solar system
       @character_id = igb.character_id       # and the character ID
     else
       . . .                                  # handle a non-IGB browser such as Internet Explorer or Firefox.
     end
   end
</pre>
<p>
To find out which methods are exposed by the <tt>igb</tt> method, take a
look at <a href="Trust/IgbInterface.html">Eve::Trust::IgbInterface</a>.
</p>
<h2>View Format</h2>
<p>
In Rails, the View is usually rendered in HTML format. That means the view
template is usually called <tt>some_action_name.html.erb</tt> , where
&#8220;some_action_name&#8220; is the name of the current action and
&#8220;html&#8221; is the file format. This library exposes a new format,
&#8220;igb&#8221;, which allows you to render an IGB-specific response.
This response is expected to be in IGB-compatible HTML format. Here&#8217;s
an example of what an IGB file might look like:
</p>
<pre>
 &lt;%=link_to_evemail &quot;Check Your Mail!&quot;%&gt;
 &lt;%if igb.trusted?%&gt;
   &lt;p&gt;Thanks for your trust! I see you're currently in &lt;%=igb.solar_system_name%&gt;.&lt;/p&gt;
   &lt;p&gt;Here's some information about our secret headquarters:&lt;/p&gt;
   &lt;ul&gt;
     &lt;li&gt;&lt;%=link_to_route &quot;Click For Directions&quot;, &quot;Jita&quot;%&gt;&lt;/li&gt;
     &lt;li&gt;&lt;%=link_to_map &quot;Show On Map&quot;, &quot;Jita&quot;%&gt;&lt;/li&gt;
   &lt;/ul&gt;
 &lt;%end%&gt;
</pre>
<p>
For more information about the various helpers available to your
IGB-specific views, take a look at <a
href="Helpers/JavascriptHelper.html">Eve::Helpers::JavascriptHelper</a>.
</p>
<p>
If the client is using the EVE In-Game Browser, then the
&#8220;action_name.igb.erb&#8220; file will be automatically used, provided
it exists. If the matching file is not found, then
&#8220;action_name.html.erb&#8220; will be used in its place, just as if
the client were using any other browser such as Internet Explorer or
Firefox. You can also explicitly require that the .igb file be rendered
using the <tt>set_igb</tt> method:
</p>
<pre>
 class AnyController &lt; ApplicationController
   before_filter :check_for_igb_requirement
   private
   def check_for_igb_requirement
     if (some_condition)
       set_igb # force the IGB template for this action to be rendered
     end
   end
 end</pre>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

